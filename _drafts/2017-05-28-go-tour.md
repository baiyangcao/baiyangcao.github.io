---
layout: post
title: 再跳一坑--Go
date: 2017-05-28
categories: Notes
tags: [Go]
---

小生又准备跳新坑了（无奈脸），假装自己是一个很好学的孩纸...

## 包

Go 程序由包构成，程序入库是 `main` 包，在程序开头定义文件所属的包

```go
package main
// 这里定义当前程序为包 main

func main() {
    // 这里就是程序的入口啦~~~
}
```

在程序中使用其他包里的对象时，首先要导入包，
按照惯例，包名与导入的路径的最后一个目录一致

```go
package main

import (
    // 导入 package fmt
    "fmt"
    // 多个包分行排列，注意行末没有逗号
    // 导入 math 路径下的 package rand
    "math/rand"
)

func main() {
    fmt.Println(rand.Intn)
}
```

> 在包中，首字母大写的对象会被导出，即在 `import` 包时，
> 可以访问到的对象只有包中首字母大写了的对象

## 函数

```go
func add(x int, y int) int {
    return x + y
}
```

如上述，`add`为函数名， `x` 和 `y` 为传入参数， 其后跟的是对应的参数类型 `int`，
而括号之后的 `int` 为返回值类型
  
> 在例子中，连续多个参数的类型相同可以只写最后一个参数的类型，如上参数列表可以缩写为 `x, y int`

在 Go 中，函数并不只能返回单一值，可以返回多个值，如下：

```go
package main

import "fmt"

func swap(x, y string) (string, string) {
    return y, x
}

func main() {
    // 注意这里使用了 := 而不是 =
    a, b := swap("fuck", "world")
    fmt.Println(a, b)
}
```

Go 程序中的函数返回值可以被命名，并且作为变量在函数中使用，
而后使用没有参数的 `return` 语句，返回变量的当前值

```go
func split(sum int) (x, y int) {
    x = sum * 4 / 9
    y = sum - x
    // 返回 x, y 的当前值
    return
}
```

> 注：命名返回值只应该被运用在短函数中，在长函数中影响代码的可读性

## 变量

```go
var (变量名) (变量类型), (变量名) (变量类型) ... = (变量值), (变量值)

// 如：
var a int = 1
var a, b int = 1, 2
var a bool, b string = true, "3"
var a, b = true, 3

// 变量在声明时没有赋值，则默认为 零值
// 数值为 0
var a int
// 布尔类型为 false
var b bool
// 字符串为 "" 空字符串
var c string 
```

在函数中， `:=` 简洁赋值语句在明确类型的地方，可以用于替代 `var` 定义

```go
func main() {
    var a, b = 1, 2
    k := 2
    c, d = true, "false"
}
```

> 注：`:=` 结构仅能用在函数体之中

Go 程序之中必须要求显示的类型转换，转换函数即为对应的类型名称，如 `float64`


## 常量

常量使用 `const` 关键字来定义

```go
const a = 1
const (
    a = 1
    b string = "test"
)
```